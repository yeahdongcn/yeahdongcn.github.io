{"version":3,"sources":["webpack:///./pages/c/_cluster/logging/index.vue","webpack:///./utils/install-redirect.js","webpack:///./components/ChartHeading.vue?c7a9","webpack:///components/ChartHeading.vue","webpack:///./components/ChartHeading.vue","webpack:///./pages/c/_cluster/logging/index.vue?b3c1","webpack:///pages/c/_cluster/logging/index.vue","webpack:///./components/ChartHeading.vue?adb7","webpack:///./pages/c/_cluster/logging/index.vue?2435"],"names":["component","product","chartName","defaultResource","redirect","store","getters","name","params","resource","dispatch","chart","query","REPO_TYPE","repoType","REPO","repoName","CHART","VERSION","versions","version","props","label","type","required","url","middleware","components","data","clusterFlows","flows","namespaceFlowTableHeaders","clusterFlowTableHeaders","computed","hasClusterFlowAccess","this","$store","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","t","attrs","staticRenderFns","_e","class"],"mappings":"4FAAA,sIAOIA,UAAY,YACd,UACA,IACA,KACA,EACA,KACA,KACA,MAIa,UAAAA,U,iHChBA,SAASC,EAASC,EAAWC,GAC1C,+DAAO,6GAA4BC,EAA5B,EAA4BA,WAAUC,EAAtC,EAAsCA,OAChCC,QAAQ,4BAA4BL,GAD1C,oBAGEE,EAHF,yCAIMC,EAAS,CACdG,KAAQ,6BACRC,OAAQ,CACNP,UACAQ,SAAUN,MARb,8CAiBGE,EAAMK,SAAS,gBAjBlB,YAmBGC,EAAQN,EAAMC,QAAQ,iBAAiB,CAAEJ,eAnB5C,0CAsBME,EAAS,CACdG,KAAQ,yBACRK,OAAK,qBACFC,YAAYF,EAAMG,WADhB,eAEFC,OAAYJ,EAAMK,WAFhB,eAGFC,QAAYN,EAAMT,YAHhB,eAIFgB,UAAYP,EAAMQ,SAAS,GAAGC,SAJ5B,MAxBN,QAiCDf,EAAMK,SAAS,eAAf,8BAAuDT,IAjCtD,4CAAP,uD,wDAHF,a,kCCAA,0HAAuS,YAAG,G,8HCC1S,CACEoB,MAAO,CACLC,MAAO,CACLC,KAAM,OACNC,UAAU,GAEZC,IAAK,CACHF,KAAM,OACNC,UAAU,K,+CCThB,sIAOIxB,UAAY,YACd,UACA,IACA,KACA,EACA,KACA,KACA,MAIa,UAAAA,U,2CClBf,0HAAoU,YAAG,G,8JCCvU,aACA,aACA,OACA,WACA,QACA,QAGA,a,EAEA,CACE0B,YAAY,EAAd,gCACEC,WAAY,CAAd,gDACE,MAHF,WAGA,oKACA,cAGA,OAFA,yCAEA,mEAJA,UAOA,cACA,uCACA,wBACA,2CACA,8BAXA,OAOA,EAPA,OAcA,kCACA,oBAfA,8CAkBEC,KArBF,WAsBI,MAAO,CACLC,aAAc,GACdC,MAAO,GACPC,0BAA2B,CACjC,YACA,OACA,SACA,iBACA,wBAEMC,wBAAyB,CAC/B,kDAKEC,SAAU,CACRC,qBADJ,WAEM,OAAOC,KAAKC,OAAO9B,QAAQ,qBAAjC,2B,mHCnDA,IAAI+B,EAAS,WAAa,IAAIC,EAAIH,KAASI,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,KAAK,CAACH,EAAIM,GAAGN,EAAIO,GAAGP,EAAIQ,EAAE,6BAA6BR,EAAIM,GAAG,OAAON,EAAIO,GAAGP,EAAIQ,EAAE,2BAA2B,KAAKL,EAAG,IAAI,CAACM,MAAM,CAAC,KAAOT,EAAIb,IAAI,IAAM,+BAA+B,OAAS,WAAW,CAACa,EAAIM,GAAGN,EAAIO,GAAGP,EAAIhB,aACnW0B,EAAkB,I,sGCDtB,IAAIX,EAAS,WAAa,IAAIC,EAAIH,KAASI,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,eAAe,CAACM,MAAM,CAAC,MAAQT,EAAIQ,EAAE,8BAA8B,IAAM,qDAAqDR,EAAIM,GAAG,KAAKH,EAAG,MAAM,CAACE,YAAY,WAAWL,EAAIM,GAAG,KAAMN,EAAwB,qBAAEG,EAAG,MAAM,CAACA,EAAG,KAAK,CAACH,EAAIM,GAAGN,EAAIO,GAAGP,EAAIQ,EAAE,qCAAqCR,EAAIM,GAAG,KAAKH,EAAG,gBAAgB,CAACE,YAAY,iBAAiBI,MAAM,CAAC,QAAUT,EAAIN,wBAAwB,KAAOM,EAAIT,aAAa,eAAc,EAAM,QAAS,EAAM,iBAAgB,EAAM,YAAY,SAAS,GAAGS,EAAIW,KAAKX,EAAIM,GAAG,KAAKH,EAAG,KAAK,CAACS,MAAM,CAAE,QAASZ,EAAIJ,uBAAwB,CAACI,EAAIM,GAAG,SAASN,EAAIO,GAAGP,EAAIQ,EAAE,oCAAoC,UAAUR,EAAIM,GAAG,KAAKH,EAAG,gBAAgB,CAACE,YAAY,iBAAiBI,MAAM,CAAC,QAAUT,EAAIP,0BAA0B,KAAOO,EAAIR,MAAM,eAAc,EAAM,QAAS,EAAM,iBAAgB,EAAM,YAAY,SAAS,IACp9BkB,EAAkB","file":"pages/c/_cluster/logging/index.34318e9a8f46921e618c.js","sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b6f7d1f8&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { REPO_TYPE, REPO, CHART, VERSION } from '@/config/query-params';\n\nexport default function(product, chartName, defaultResource) {\n  return async function middleware({ redirect, store } ) {\n    if ( store.getters['type-map/isProductActive'](product) ) {\n      // If the product is installed and there's a default resource, redirect there\n      if ( defaultResource ) {\n        return redirect({\n          name:   'c-cluster-product-resource',\n          params: {\n            product,\n            resource: defaultResource\n          },\n        });\n      }\n\n      // Otherwise just let the middleware pass through\n    } else {\n      // The product is not installed, redirect to the install chart\n\n      await store.dispatch('catalog/load');\n\n      const chart = store.getters['catalog/chart']({ chartName });\n\n      if ( chart ) {\n        return redirect({\n          name:   'c-cluster-apps-install',\n          query:  {\n            [REPO_TYPE]: chart.repoType,\n            [REPO]:      chart.repoName,\n            [CHART]:     chart.chartName,\n            [VERSION]:   chart.versions[0].version\n          },\n        });\n      } else {\n        // The chart's not available\n        store.dispatch('loadingError', `Chart not found for ${ product }`);\n      }\n    }\n  };\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--5-0!../node_modules/thread-loader/dist/cjs.js??ref--5-1!../node_modules/babel-loader/lib/index.js??ref--5-2!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartHeading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--5-0!../node_modules/thread-loader/dist/cjs.js??ref--5-1!../node_modules/babel-loader/lib/index.js??ref--5-2!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartHeading.vue?vue&type=script&lang=js&\"","<script>\nexport default {\n  props: {\n    label: {\n      type:     String,\n      required: true\n    },\n    url: {\n      type:     String,\n      required: true\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"chart-heading\">\n    <h1>{{ t('chartHeading.overview') }}</h1>\n    {{ t('chartHeading.poweredBy') }} <a :href=\"url\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">{{ label }}</a>\n  </div>\n</template>\n","import { render, staticRenderFns } from \"./ChartHeading.vue?vue&type=template&id=4175f9cd&\"\nimport script from \"./ChartHeading.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartHeading.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--5-0!../../../../node_modules/thread-loader/dist/cjs.js??ref--5-1!../../../../node_modules/babel-loader/lib/index.js??ref--5-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--5-0!../../../../node_modules/thread-loader/dist/cjs.js??ref--5-1!../../../../node_modules/babel-loader/lib/index.js??ref--5-2!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<script>\nimport { NAME, CHART_NAME } from '@/config/product/logging';\nimport InstallRedirect from '@/utils/install-redirect';\nimport { LOGGING } from '@/config/types';\nimport SortableTable from '@/components/SortableTable';\nimport { allHash } from '@/utils/promise';\nimport {\n  CONFIGURED_PROVIDERS, CLUSTER_OUTPUT, OUTPUT, NAMESPACE, NAME as NAME_COL\n} from '@/config/table-headers';\nimport ChartHeading from '@/components/ChartHeading';\n\nexport default {\n  middleware: InstallRedirect(NAME, CHART_NAME),\n  components: { ChartHeading, SortableTable },\n  async fetch() {\n    const getAllOrDefault = (type) => {\n      const hasAccess = this.$store.getters[`cluster/schemaFor`](type);\n\n      return hasAccess ? this.$store.dispatch('cluster/findAll', { type }) : Promise.resolve([]);\n    };\n\n    const hash = await allHash({\n      clusterFlows:   getAllOrDefault(LOGGING.CLUSTER_FLOW),\n      flows:          getAllOrDefault(LOGGING.FLOW),\n      clusterOutputs: getAllOrDefault(LOGGING.CLUSTER_OUTPUT),\n      outputs:        getAllOrDefault(LOGGING.OUTPUT),\n    });\n\n    this.clusterFlows = hash.clusterFlows || [];\n    this.flows = hash.flows || [];\n  },\n\n  data() {\n    return {\n      clusterFlows:              [],\n      flows:                     [],\n      namespaceFlowTableHeaders: [\n        NAMESPACE,\n        NAME_COL,\n        OUTPUT,\n        CLUSTER_OUTPUT,\n        CONFIGURED_PROVIDERS\n      ],\n      clusterFlowTableHeaders: [\n        NAME_COL, CLUSTER_OUTPUT, CONFIGURED_PROVIDERS\n      ]\n    };\n  },\n\n  computed: {\n    hasClusterFlowAccess() {\n      return this.$store.getters[`cluster/schemaFor`](LOGGING.CLUSTER_FLOW);\n    }\n  },\n};\n</script>\n\n<template>\n  <div class=\"logging\">\n    <ChartHeading :label=\"t('logging.overview.poweredBy')\" url=\"https://github.com/banzaicloud/logging-operator\" />\n    <div class=\"spacer\" />\n    <div v-if=\"hasClusterFlowAccess\">\n      <h2>{{ t('logging.overview.clusterLevel') }}</h2>\n      <SortableTable\n        class=\"sortable-table\"\n        :headers=\"clusterFlowTableHeaders\"\n        :rows=\"clusterFlows\"\n        :row-actions=\"false\"\n        :search=\"false\"\n        :table-actions=\"false\"\n        key-field=\"id\"\n      />\n    </div>\n    <h2 :class=\"{ 'mt-20': hasClusterFlowAccess }\">\n      {{ t('logging.overview.namespaceLevel') }}\n    </h2>\n    <SortableTable\n      class=\"sortable-table\"\n      :headers=\"namespaceFlowTableHeaders\"\n      :rows=\"flows\"\n      :row-actions=\"false\"\n      :search=\"false\"\n      :table-actions=\"false\"\n      key-field=\"id\"\n    />\n  </div>\n</template>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart-heading\"},[_c('h1',[_vm._v(_vm._s(_vm.t('chartHeading.overview')))]),_vm._v(\"\\n  \"+_vm._s(_vm.t('chartHeading.poweredBy'))+\" \"),_c('a',{attrs:{\"href\":_vm.url,\"rel\":\"nofollow noopener noreferrer\",\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.label))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"logging\"},[_c('ChartHeading',{attrs:{\"label\":_vm.t('logging.overview.poweredBy'),\"url\":\"https://github.com/banzaicloud/logging-operator\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"}),_vm._v(\" \"),(_vm.hasClusterFlowAccess)?_c('div',[_c('h2',[_vm._v(_vm._s(_vm.t('logging.overview.clusterLevel')))]),_vm._v(\" \"),_c('SortableTable',{staticClass:\"sortable-table\",attrs:{\"headers\":_vm.clusterFlowTableHeaders,\"rows\":_vm.clusterFlows,\"row-actions\":false,\"search\":false,\"table-actions\":false,\"key-field\":\"id\"}})],1):_vm._e(),_vm._v(\" \"),_c('h2',{class:{ 'mt-20': _vm.hasClusterFlowAccess }},[_vm._v(\"\\n    \"+_vm._s(_vm.t('logging.overview.namespaceLevel'))+\"\\n  \")]),_vm._v(\" \"),_c('SortableTable',{staticClass:\"sortable-table\",attrs:{\"headers\":_vm.namespaceFlowTableHeaders,\"rows\":_vm.flows,\"row-actions\":false,\"search\":false,\"table-actions\":false,\"key-field\":\"id\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}